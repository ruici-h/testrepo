
Background reading on Host IPs, Ports, Ingresses and how they work:
https://rcarrata.com/openshift/ocp4_upi_routers/
https://rcarrata.com/openshift/ocp4_shard_same_node/



Get the user and pass from the ADCs new service account

create secret  generic nslogin --from-literal=username='cic' --from-literal=password='mypassword'



NS_IP  Mandatory	The IP address of the Citrix ADC appliance. For more details, see Prerequisites.
NS_USER and NS_PASSWORD	Mandatory	The user name and password of the Citrix ADC VPX or MPX appliance used as the Ingress device. For more details, see Prerequisites.
EULA	Mandatory	The End User License Agreement. Specify the value as Yes.
Kubernetes_url	Optional	The kube-apiserver url that Citrix ingress controller uses to register the events. If the value is not specified, Citrix ingress controller uses the internal kube-apiserver IP address.
LOGLEVEL	Optional	The log levels to control the logs generated by Citrix ingress controller. By default, the value is set to DEBUG. The supported values are: CRITICAL, ERROR, WARNING, INFO, and DEBUG. For more information, see Log Levels
NS_PROTOCOL and NS_PORT	Optional	Defines the protocol and port that is used by the Citrix ingress controller to communicate with Citrix ADC. By default, Citrix ingress controller uses HTTP on port 80. You can also use HTTPS on port 443.
ingress-classes	Optional	If multiple ingress load balancers are used to load balance different ingress resources. You can use this environment variable to specify the Citrix ingress controller to configure Citrix ADC associated with specific ingress class. For information on Ingress classes, see Ingress class support
NS_VIP	Optional	Citrix ingress controller uses the IP address provided in this environment variable to configure a virtual IP address to the Citrix ADC that receives Ingress traffic. Note: NS_VIP acts as a fallback when the frontend-ip annotation is not provided in Ingress yaml. Not supported for Type Loadbalancer service.
NS_APPS_NAME_PREFIX	Optional	By default, the Citrix ingress controller adds “k8s” as prefix to the Citrix ADC entities such as, content switching (CS) virtual server, load balancing (LB) virtual server and so on. You can now customize the prefix using the NS_APPS_NAME_PREFIX environment variable in the Citrix ingress controller deployment YAML file. You can use alphanumeric characters for the prefix and the prefix length should not exceed 8 characters.
NAMESPACE	Optional	While running a Citrix ingress controller with Role based RBAC, you must provide the namespace which you want to listen or get events. This namespace must be same as the one used for creating the service account. Using the service account, the Citrix ingress controller can listen on a namespace. You can use the NAMESPACE environment variable to specify the namespace. For more information, see Deploy the Citrix ingress controller for a namespace.
POD_IPS_FOR_SERVICEGROUP_MEMBERS	Optional	By default, while configuring services of type LoadBalancer and NodePort on an external tier-1 Citrix ADC the Citrix ingress controller adds NodeIP and NodePort as service group members. If this variable is set as True, pod IP address and port are added instead of NodeIP and NodePort as service group members.
IGNORE_NODE_EXTERNAL_IP	Optional	While adding NodeIP for services of type LoadBalancer or NodePort on an external tier-1 Citrix ADC, the Citrix ingress controller prioritizes an external IP address over an internal IP address. When you want to prefer an internal IP address over an external IP address for NodeIP, you can set this variable to True.
NS_CONFIG_DNS_REC	Optional	Enables the DNS server configuration on Citrix ADC. This variable is configured at the boot time and cannot be changed at runtime. Possible values are true or false. The default value is false and you need to set it as true to enable the DNS server configuration. When you set the value as ‘true’, the corresponding command add dns addrec <abc.com 1.1.1.1> is executed on Citrix ADC and an address record (mapping of the domain name to IP address) is created. For more information, see Create address records for a domain name.